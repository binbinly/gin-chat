"use strict";(self["webpackChunkvue_h5_template"]=self["webpackChunkvue_h5_template"]||[]).push([[183],{64183:function(t,e,n){n.r(e),n.d(e,{default:function(){return g}});var i=function(){var t=this,e=t._self._c;return e("div",[e("van-nav-bar",{attrs:{title:"我的收藏",fixed:"",placeholder:"","left-arrow":""},on:{"click-left":t.onClickLeft}}),e("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(n,i){return e("div",{key:i,staticClass:"pt-1 px-1",on:{click:function(e){return t.send(n)}}},[e("van-swipe-cell",{scopedSlots:t._u([{key:"right",fn:function(){return[e("van-button",{staticStyle:{height:"100%"},attrs:{square:"",type:"danger",text:"删除"},on:{click:function(e){return t.onDelete(n.id,i)}}})]},proxy:!0}],null,!0)},[e("div",{staticClass:"bg-white rounded p-1"},[t.isText(n.type)?e("span",[t._v(t._s(n.content))]):t.isEmoticon(n.type)||t.isImage(n.type)?e("van-image",{staticStyle:{"max-width":"200px","max-height":"300px"},attrs:{src:n.content}}):t.isVideo(n.type)?e("video",{staticStyle:{"max-width":"200px","max-height":"300px"},attrs:{src:n.content,controls:""}}):t._e()],1)])],1)})),0)],1)],1)},s=[],r=(n(58479),n(39146)),o=(n(88694),n(41610)),a=n(71568),u=n(18128),c=n(22970),l=n(57381),h={mixins:[a.Z],data(){return{loading:!1,finished:!1,refreshing:!1,page:1,list:[],type:""}},computed:{isText(){return function(t){return t===l.Z.TYPE_TEXT}},isImage(){return function(t){return t===l.Z.TYPE_IMAGE}},isVideo(){return function(t){return t===l.Z.TYPE_VIDEO}},isAudio(){return function(t){return t===l.Z.TYPE_AUDIO}},isEmoticon(){return function(t){return t===l.Z.TYPE_EMOTICON}},isCard(){return function(t){return t===l.Z.TYPE_CARD}}},activated(){this.type=this.$route.query.type||""},methods:{onLoad(){this.getData()},onRefresh(){this.page=1,this.finished=!1,this.loading=!0,this.onLoad()},send(t){"send"===this.type&&(u.Z.$emit("sendItem",{sendType:"fava",...t}),this.$router.back())},onDelete(t,e){o.Z.confirm({message:"确定删除吗？"}).then((()=>{(0,c.EO)(t).then((t=>{this.list.splice(e,1),r.Z.success("删除成功")}))}))},getData(){(0,c.xu)(this.page).then((t=>{this.refreshing&&(this.list=[],this.refreshing=!1);const e=t.map((t=>(t.options=JSON.parse(t.options),t)));this.list=[...this.list,...e],this.loading=!1,t.length<10?this.finished=!0:this.page++}))}}},f=h,d=n(1001),p=(0,d.Z)(f,i,s,!1,null,null,null),g=p.exports},22970:function(t,e,n){n.d(e,{$z:function(){return s},EO:function(){return o},xu:function(){return r}});var i=n(7705);function s(t){return i.Z.post(i.Z.Collect.Create,t)}function r(t){return i.Z.get(i.Z.Collect.List,{p:t})}function o(t){return i.Z.post(i.Z.Collect.Destroy,{id:t})}},71568:function(t,e,n){n(58479);var i=n(39146),s=n(76927);e["Z"]={created(){let t=(0,s.cF)("token");if(!t)return this.$router.push({path:"/login"})},methods:{onClickLeft(){this.$router.back()},push(t,e){this.$router.push({path:t,params:e})},draw(){(0,i.Z)("待开发")},backToast(t="非法参数"){this.toast(t),setTimeout((()=>{this.$router.back()}),500)},toast(t="非法参数"){(0,i.Z)({title:t,position:"bottom"})}}}}}]);
"use strict";(self["webpackChunkvue_h5_template"]=self["webpackChunkvue_h5_template"]||[]).push([[304],{18304:function(t,a,e){e.r(a),e.d(a,{default:function(){return p}});var s=function(){var t=this,a=t._self._c;return a("div",[a("van-nav-bar",{attrs:{title:"设置备注和标签","left-arrow":""},on:{"click-left":t.onClickLeft},scopedSlots:t._u([{key:"right",fn:function(){return[a("van-button",{attrs:{type:"primary",size:"small"},on:{click:t.onSave}},[t._v("保存")])]},proxy:!0}])}),a("van-cell-group",{attrs:{title:"备注名"}},[a("van-field",{attrs:{name:"nickname",placeholder:"请输入备注名"},model:{value:t.nickname,callback:function(a){t.nickname=a},expression:"nickname"}})],1),a("van-cell-group",{attrs:{title:"标签"}},[a("van-button",{staticClass:"m-1",attrs:{icon:"plus",size:"small",type:"primary"},on:{click:function(a){t.show=!0}}},[t._v("自定义标签")]),t._l(t.tagList,(function(e,s){return[a("van-tag",{staticClass:"m-1",staticStyle:{padding:"5px"},attrs:{closeable:"",size:"large",type:"primary"},on:{close:function(a){return t.removeTag(e)}}},[t._v(" "+t._s(e))])]}))],2),a("van-cell-group",{attrs:{title:"可选常用标签"}},t._l(t.allTagList,(function(e,s){return a("van-tag",{staticClass:"m-1",attrs:{type:"primary",size:"large",type:e.type},on:{click:function(a){return t.addTag(e.name)}}},[t._v(" "+t._s(e.name))])})),1),a("van-overlay",{attrs:{show:t.show},on:{click:function(a){t.show=!1}}},[a("div",{staticClass:"wrapper",on:{click:function(t){t.stopPropagation()}}},[a("van-form",{on:{submit:t.onSubmitTag}},[a("van-field",{attrs:{center:"",clearable:"",label:"自定义标签",placeholder:"请输入标签名",rules:[{required:!0}]},scopedSlots:t._u([{key:"button",fn:function(){return[a("van-button",{attrs:{size:"small",type:"primary","native-type":"submit"}},[t._v("添加")])]},proxy:!0}]),model:{value:t.tag,callback:function(a){t.tag=a},expression:"tag"}})],1)],1)])],1)},n=[],i=(e(58479),e(39146)),r=e(71568),o=e(14266),l={mixins:[r.Z],data(){return{show:!1,id:0,nickname:"",tag:"",tagList:[],allTagList:["家人","亲戚","朋友","好友","运动","吃喝","看书","睡觉","玩手机"]}},mounted(){const t=this.$route.query;if(!t)return this.backToast();this.id=parseInt(t.user_id),this.nickname=t.nickname,this.tagList=""==t.tags?[]:t.tags.split(",");const a=["primary","success","danger","warning"];this.allTagList=this.allTagList.map((t=>{const e=Math.floor(4*Math.random());return{name:t,type:a[e]}}))},methods:{addTag(t){if(-1!==this.tagList.indexOf(t))return(0,i.Z)("标签已存在");this.tagList.push(t)},removeTag(t){this.tagList=this.tagList.filter((a=>a!=t))},onSubmitTag(){this.addTag(this.tag),this.tag="",this.show=!1},onSave(){(0,o.Eg)({user_id:this.id,nickname:this.nickname,tags:this.tagList}).then((t=>{i.Z.success("保存成功"),this.$router.back()}))}}},c=l,u=e(1001),h=(0,u.Z)(c,s,n,!1,null,null,null),p=h.exports},71568:function(t,a,e){e(58479);var s=e(39146),n=e(76927);a["Z"]={created(){let t=(0,n.cF)("token");if(!t)return this.$router.push({path:"/login"})},methods:{onClickLeft(){this.$router.back()},push(t,a){this.$router.push({path:t,params:a})},draw(){(0,s.Z)("待开发")},backToast(t="非法参数"){this.toast(t),setTimeout((()=>{this.$router.back()}),500)},toast(t="非法参数"){(0,s.Z)({title:t,position:"bottom"})}}}}}]);
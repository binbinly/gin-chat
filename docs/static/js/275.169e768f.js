"use strict";(self["webpackChunkvue_h5_template"]=self["webpackChunkvue_h5_template"]||[]).push([[275],{79275:function(t,e,s){s.r(e),s.d(e,{default:function(){return m}});var i=function(){var t=this,e=t._self._c;return e("div",[e("van-nav-bar",{attrs:{"left-text":"选择","left-arrow":""},on:{"click-left":t.onClickLeft},scopedSlots:t._u([{key:"right",fn:function(){return[e("van-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleNavBarBtn}},[t._v(t._s(t.muliSelect?"发送 ("+t.selectCount+")":"多选"))])]},proxy:!0}])}),e("van-search",{attrs:{placeholder:"搜索","input-align":"center"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),t._l(t.allList,(function(s,i){return e("van-cell",{attrs:{title:s.name,center:""},on:{click:function(e){return t.selectItem(s)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("van-image",{staticClass:"pr-1",attrs:{round:"",width:"35",height:"35",src:t._f("formatAvatar")(s.avatar)}})]},proxy:!0},t.muliSelect?{key:"right-icon",fn:function(){return[e("van-checkbox",{ref:"checkboxes",refInFor:!0,attrs:{"checked-color":"#08c060"},model:{value:s.checked,callback:function(e){t.$set(s,"checked",e)},expression:"item.checked"}})]},proxy:!0}:null],null,!0)})})),""!==t.keyword&&0===t.searchList.length?e("div",{staticClass:"flex align-center justify-center",staticStyle:{height:"50px"}},[e("span",{staticClass:"text-light-muted"},[t._v("暂无搜索结果")])]):t._e(),e("van-dialog",{attrs:{title:"发送给：","show-cancel-button":""},on:{confirm:t.onConfirm},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t.selectCount>0?e("div",t._l(t.selectList,(function(s,i){return e("div",{staticClass:"ml-1 flex flex-column"},[e("van-image",{attrs:{src:t._f("formatAvatar")(s.avatar),round:"",width:"35",height:"35"}}),e("span",{staticClass:"text-muted"},[t._v(t._s(s.name))])],1)})),0):e("div",{staticClass:"flex flex-column"},[e("van-image",{staticClass:"m-1",attrs:{src:t._f("formatAvatar")(t.sendItem.avatar),width:"35",height:"35"}}),e("span",{staticClass:"text-muted",staticStyle:{"margin-top":"16px"}},[t._v(t._s(t.sendItem.name))])],1),e("div",{staticClass:"my-1 bg-light rounded p-1"},[e("span",{staticClass:"text-light-muted"},[t._v(t._s(t.message))])]),e("van-field",{staticClass:"bg-light",attrs:{name:"content",placeholder:"给好友留言"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)],2)},a=[],n=(s(58479),s(39146)),c=s(20629),l=s(71568),r=s(57381),o={mixins:[l.Z],data(){return{show:!1,keyword:"",muliSelect:!1,list:[],detail:{},sendItem:{},content:""}},activated(){this.list=this.chatList.map((t=>({...t,checked:!1}))),this.$route.query&&(this.detail=this.$route.query,this.detail.type&&(this.detail.type=r.Z.TYPE_TRANS_LIST[parseInt(this.detail.type)]))},computed:{...(0,c.rn)({chatList:t=>t.user.chatList,chat:t=>t.user.chat}),allList(){return""===this.keyword?this.list:this.searchList},searchList(){return""===this.keyword?[]:this.list.filter((t=>-1!==t.name.indexOf(this.keyword)))},selectList(){return this.list.filter((t=>t.checked))},selectCount(){return this.selectList.length},message(){let t={image:"[图片]",video:"[视频]",audio:"[语音]",card:"[名片]",emoticon:"[表情]"};return"text"===this.detail.type?this.detail.content:t[this.detail.type]}},methods:{handleNavBarBtn(){return this.muliSelect?0===this.selectCount?(0,n.Z)("请选择"):void(this.show=!0):this.muliSelect=!0},onConfirm(){this.selectList.forEach((t=>{this.send(t),this.content&&this.send(t,this.content,"text")})),this.$router.back()},selectItem(t){if(this.muliSelect)return t.checked||9!==this.selectCount?t.checked=!t.checked:(0,n.Z)("最多选中 9 个");this.show=!0,this.sendItem=t,t.checked=!0},send(t,e=!1,s=!1){const i=this.chat.formatSendData({to:{id:t.id,name:t.name,avatar:t.avatar},chat_type:t.chat_type||r.Z.CHAT_TYPE_USER,content:e||this.detail.content,type:s||this.detail.type,options:this.detail.options});this.chat.send(i)}}},h=o,u=s(1001),d=(0,u.Z)(h,i,a,!1,null,null,null),m=d.exports},71568:function(t,e,s){s(58479);var i=s(39146),a=s(76927);e["Z"]={created(){let t=(0,a.cF)("token");if(!t)return this.$router.push({path:"/login"})},methods:{onClickLeft(){this.$router.back()},push(t,e){this.$router.push({path:t,params:e})},draw(){(0,i.Z)("待开发")},backToast(t="非法参数"){this.toast(t),setTimeout((()=>{this.$router.back()}),500)},toast(t="非法参数"){(0,i.Z)({title:t,position:"bottom"})}}}}}]);
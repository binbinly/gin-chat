"use strict";(self["webpackChunkvue_h5_template"]=self["webpackChunkvue_h5_template"]||[]).push([[507],{95507:function(e,t,s){s.r(t),s.d(t,{default:function(){return p}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page"},[e.show?t("div",[e._m(0),t("div",{staticStyle:{margin:"16px"}},[t("van-form",{on:{submit:e.onSubmit}},["login"===e.type?[t("van-field",{attrs:{name:"username",placeholder:"请输入用户名",rules:[{required:!0}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),t("van-divider"),t("van-field",{attrs:{type:"password",name:"password",placeholder:"请输入密码",rules:[{required:!0,validator:e.pwdValid}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})]:[t("van-field",{attrs:{name:"username",placeholder:"请输入用户名",rules:[{required:!0}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),t("van-divider"),t("van-field",{attrs:{name:"phone",placeholder:"请输入手机号",rules:[{required:!0}]},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),t("van-divider"),t("van-field",{attrs:{type:"password",name:"password",placeholder:"请输入密码",rules:[{required:!0,validator:e.pwdValid}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("van-divider"),t("van-field",{attrs:{type:"password",name:"confirm_password",placeholder:"请确认密码",rules:[{required:!0,validator:e.confirmPwdValid}]},model:{value:e.repassword,callback:function(t){e.repassword=t},expression:"repassword"}})],t("van-divider"),t("van-button",{staticClass:"text-white main-bg-color",attrs:{"hover-class":"main-bg-hover-color",block:"","native-type":"submit"}},[e._v(" "+e._s("login"===e.type?"登 录":"注 册")+" ")])],2)],1),t("div",{staticClass:"flex align-center justify-center"},[t("span",{staticClass:"text-light-muted font p-2",on:{click:e.changeType}},[e._v(e._s("login"===e.type?"注册账号":"马上登录"))]),t("span",{staticClass:"text-light-muted font"},[e._v("|")]),t("span",{staticClass:"text-light-muted font p-2",on:{click:e.resetPwd}},[e._v("忘记密码")])])]):t("div",{staticClass:"position-fixed top-0 bottom-0 left-0 right-0 bg-light flex align-center justify-center"},[t("span",{staticClass:"text-muted font"},[e._v("正在加载...")])])])},r=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex align-center justify-center",staticStyle:{height:"175px"}},[t("span",{staticStyle:{"font-size":"26px"}},[e._v("YOU-LOGO")])])}],a=(s(58479),s(39146)),i=s(76927),o=s(2718),l={data(){return{type:"login",show:!1,username:"",phone:"",password:"",repassword:""}},created(){let e=(0,i.cF)("token");if(!e)return this.show=!0;this.$router.replace({path:"/home"})},methods:{resetPwd(){(0,a.Z)("待开发")},initForm(){this.username="",this.password="",this.repassword="",this.phone=""},pwdValid(e){return e.length>=6&&e.length<=20},confirmPwdValid(e){return e===this.password},changeType(){this.type="login"===this.type?"reg":"login",this.initForm()},onSubmit(){"login"===this.type?(0,o.x4)({username:this.username,password:this.password}).then((e=>{this.$store.dispatch("login",e),a.Z.success("登录成功"),this.$router.replace({path:"/home"})})):(0,o.YD)({username:this.username,phone:this.phone,password:this.password,confirm_password:this.repassword}).then((()=>{this.changeType(),(0,a.Z)("注册成功，去登录")}))}}},u=l,d=s(1001),c=(0,d.Z)(u,n,r,!1,null,null,null),p=c.exports},2718:function(e,t,s){s.d(t,{S0:function(){return l},YD:function(){return a},Zr:function(){return o},cT:function(){return u},qz:function(){return i},x4:function(){return r}});var n=s(7705);function r(e){return n.Z.post(n.Z.Login,e,!1)}function a(e){return n.Z.post(n.Z.Reg,e,!1)}function i(e){return n.Z.post(n.Z.SearchUser,e)}function o(){return n.Z.get(n.Z.EmoticonCat)}function l(e){return n.Z.get(n.Z.Emoticon,{cat:e},!0)}function u(e){return new Promise(((t,s)=>{n.Z.post(n.Z.Upload,{file:e},!0,!0).then((e=>e)).catch((e=>{s(e)}))}))}}}]);